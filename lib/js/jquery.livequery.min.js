/*! Copyright
 *  (c) 2010, Brandon Aaron (http://brandonaaron.net)
 *  (c) 2012, Alexander Zaytsev (http://hazzik.ru/en)
 * Dual licensed under the MIT (MIT_LICENSE.txt)
 * and GPL Version 2 (GPL_LICENSE.txt) licenses.
 *
 * Version: 1.3.1
 * Requires jQuery 1.3+
 * Docs: http://docs.jquery.com/Plugins/livequery
 */
(function(b){var c=function(f,g,e,d){return(f.selector==g.selector&&f.context==g.context&&(!e||e.$lqguid==g.fn.$lqguid)&&(!d||d.$lqguid==g.fn2.$lqguid))};b.extend(b.fn,{livequery:function(e,d){var f=this,g;b.each(a.queries,function(h,j){if(c(f,j,e,d)){g=j;return false}});g=g||new a(f.selector,f.context,e,d);g.stopped=false;g.run();return f},expire:function(e,d){var f=this;b.each(a.queries,function(g,h){if(c(f,h,e,d)&&!f.stopped){a.stop(h.id)}});return f}});var a=b.livequery=function(d,f,g,e){var h=this;h.selector=d;h.context=f;h.fn=g;h.fn2=e;h.elements=b([]);h.stopped=false;h.id=a.queries.push(h)-1;g.$lqguid=g.$lqguid||a.guid++;if(e){e.$lqguid=e.$lqguid||a.guid++}return h};a.prototype={stop:function(){var d=this;if(d.stopped){return}if(d.fn2){d.elements.each(d.fn2)}d.elements=b([]);d.stopped=true},run:function(){var f=this;if(f.stopped){return}var j=f.elements,d,k,i,g=function(){d=b(f.context).find(f.selector);k=d.not(j);i=j.not(d)};try{g()}catch(h){try{g()}catch(h){console.log("Error running livequery. 2 attempts.",f,h);return}}f.elements=d;k.each(f.fn);if(f.fn2){i.each(f.fn2)}}};b.extend(a,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.running&&a.queue.length){var d=a.queue.length;while(d--){a.queries[a.queue.shift()].run()}}},pause:function(){a.running=false},play:function(){a.running=true;a.run()},registerPlugin:function(){b.each(arguments,function(e,f){if(!b.fn[f]){return}var d=b.fn[f];b.fn[f]=function(){var g=d.apply(this,arguments);a.run();return g}})},run:function(d){if(typeof d!=="undefined"){if(b.inArray(d,a.queue)<0){a.queue.push(d)}}else{b.each(a.queries,function(e){if(b.inArray(e,a.queue)<0){a.queue.push(e)}})}if(a.timeout){clearTimeout(a.timeout)}a.timeout=setTimeout(a.checkQueue,20)},stop:function(d){if(typeof d!=="undefined"){a.queries[d].stop()}else{b.each(a.queries,a.prototype.stop)}}});a.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp");b(function(){a.play()})})(jQuery);
